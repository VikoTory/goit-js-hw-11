{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  wrapperPictures: document.querySelector('.pictures-list'),\n};\n\nconst loader = document.querySelector('.loader');\n\n\nrefs.searchForm.addEventListener('submit', onSubmitForm);\n\nfunction onSubmitForm(e) {\n    e.preventDefault();\n  const symbol = e.target.elements.query.value;\n  \n  loader.style.display = 'inline-block';\n\n\n    \n  setTimeout(() => {\n        getPicture(symbol)\n            .then(data => {\n                renderPictures(data.hits);\n\n                if (data.hits.length === 0) {\n                    iziToast.error({\n                        message: 'Sorry, there are no images matching your search query. Please try again!',\n                        position: 'topRight',\n                        backgroundColor: '#EF4040',\n                        messageColor: '#FAFAFB',\n                    })\n                }\n            })\n            .catch(error => {\n                console.log(error)\n            })\n            .finally(() => {\n                loader.style.display = 'none';\n            });\n    }, 1000); \n\n    e.target.reset();\n}\n\nfunction getPicture(symbol) {\n    const API_KEY = '42136767-fa6744b1a2510b3114c4aacf9'\n    const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n    const PARAMS = new URLSearchParams({\n        key: API_KEY,\n        q: symbol,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true\n  });\n    const url = `${BASE_URL}${END_POINT}?${PARAMS}`;\n    \n    return fetch(url).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw new Error('Network response was not ok');\n      }\n    });\n}\n\nfunction pictureTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n    return `<li class=\"gallery-card\">\n  <a class=\"gallary-card-link\" href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n    <ul class=\"image-info\">\n      <li class=\"image-item-info\">\n        <p>Likes</p>\n        <p>${likes}</p>\n      </li>\n      <li class=\"image-item-info\">\n        <p>Views</p>\n        <p>${views}</p>\n      </li>\n      <li class=\"image-item-info\">\n        <p>Comments</p>\n        <p>${comments}</p>\n      </li>\n      <li class=\"image-item-info\">\n        <p>Downloads</p>\n        <p>${downloads}</p>\n      </li>\n    </ul>\n  </a>\n</li>`;\n}\n\nfunction picturesTemplate(pictures) {\n  return pictures.map(pictureTemplate).join('');\n}\n\nfunction renderPictures(pictures) {\n  const markup = picturesTemplate(pictures);\n  refs.wrapperPictures.innerHTML = markup;\n  \n  const lightbox = new SimpleLightbox('.gallery-card a.gallary-card-link', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n  lightbox.refresh();\n}\n"],"names":["refs","loader","onSubmitForm","e","symbol","getPicture","data","renderPictures","iziToast","error","API_KEY","BASE_URL","END_POINT","PARAMS","url","response","pictureTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","picturesTemplate","pictures","markup","SimpleLightbox"],"mappings":"6vBAKA,MAAMA,EAAO,CACX,WAAY,SAAS,cAAc,cAAc,EACjD,gBAAiB,SAAS,cAAc,gBAAgB,CAC1D,EAEMC,EAAS,SAAS,cAAc,SAAS,EAG/CD,EAAK,WAAW,iBAAiB,SAAUE,CAAY,EAEvD,SAASA,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAClB,MAAMC,EAASD,EAAE,OAAO,SAAS,MAAM,MAEvCF,EAAO,MAAM,QAAU,eAIvB,WAAW,IAAM,CACXI,EAAWD,CAAM,EACZ,KAAKE,GAAQ,CACVC,EAAeD,EAAK,IAAI,EAEpBA,EAAK,KAAK,SAAW,GACrBE,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,SACtC,CAAqB,CAErB,CAAa,EACA,MAAMC,GAAS,CACZ,QAAQ,IAAIA,CAAK,CACjC,CAAa,EACA,QAAQ,IAAM,CACXR,EAAO,MAAM,QAAU,MACvC,CAAa,CACR,EAAE,GAAI,EAEPE,EAAE,OAAO,OACb,CAEA,SAASE,EAAWD,EAAQ,CACxB,MAAMM,EAAU,qCACVC,EAAW,sBACbC,EAAY,QACVC,EAAS,IAAI,gBAAgB,CAC/B,IAAKH,EACL,EAAGN,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAG,EACOU,EAAM,GAAGH,IAAWC,KAAaC,IAEvC,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAY,CACjC,GAAIA,EAAS,GACX,OAAOA,EAAS,OAEhB,MAAM,IAAI,MAAM,6BAA6B,CAErD,CAAK,CACL,CAEA,SAASC,EAAgB,CACvB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACC,MAAO;AAAA,uCAC4BL;AAAA,gBACvBD,WAAsBE;AAAA;AAAA;AAAA;AAAA,aAIzBC;AAAA;AAAA;AAAA;AAAA,aAIAC;AAAA;AAAA;AAAA;AAAA,aAIAC;AAAA;AAAA;AAAA;AAAA,aAIAC;AAAA;AAAA;AAAA;AAAA,MAKb,CAEA,SAASC,EAAiBC,EAAU,CAClC,OAAOA,EAAS,IAAIT,CAAe,EAAE,KAAK,EAAE,CAC9C,CAEA,SAAST,EAAekB,EAAU,CAChC,MAAMC,EAASF,EAAiBC,CAAQ,EACxCzB,EAAK,gBAAgB,UAAY0B,EAEhB,IAAIC,EAAe,oCAAqC,CACvE,aAAc,IACd,aAAc,KAClB,CAAG,EACQ,QAAO,CAClB"}